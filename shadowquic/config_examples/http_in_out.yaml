inbounds:
  - tag: http-in
    type: http
    bind-addr: 127.0.0.1:7890
  # - tag: tun-in
  #   type: tun
  #   ipv4-cidr: 198.18.0.1/15
  #   name: "utun66"
  #   # mtu: 1500
  #   # flow-timeout-secs: 120
  #   auto-route: false
  - tag: sq-in
    type: shadowquic
    bind-addr: "0.0.0.0:1443"
    users:
        - username: "87654321"
          password: "12345678"
    jls-upstream:
        addr: "cloudflare.com:443" # domain + port, domain must be the same as client
    alpn: ["h3"]
    congestion-control: bbr
    zero-rtt: true

outbounds:
    sq-out:
        type: shadowquic
        addr: "127.0.0.1:1443"
        username: "87654321"
        password: "12345678"
        server-name: "cloudflare.com" # must be the same as jls_upstream in server
        alpn: ["h3"]
        initial-mtu: 1300
        congestion-control: bbr
        zero-rtt: true
        over-stream: false  # true for udp over stream, false for udp over datagram
    direct-out:
        type: direct

rules:
    - inbound:
        - http-in
      outbound: sq-out
final: direct-out
log-level: "trace"
